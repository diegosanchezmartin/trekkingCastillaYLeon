{"version":3,"file":"js/490.e416c20b.js","mappings":"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","sources":["webpack://trekkingcastillayleon/./node_modules/vue-loader/dist/templateLoader.js","webpack://trekkingcastillayleon/./node_modules/vue-loader/dist/index.js","webpack://trekkingcastillayleon/./src/views/TabMensajes.vue"],"sourcesContent":["import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createTextVNode(\"Mensajes\")\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\"Mensajes\")\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\" Conversaciones recientes \")\nconst _hoisted_4 = [\"src\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ion_title = _resolveComponent(\"ion-title\")!\n  const _component_ion_toolbar = _resolveComponent(\"ion-toolbar\")!\n  const _component_ion_header = _resolveComponent(\"ion-header\")!\n  const _component_ion_list_header = _resolveComponent(\"ion-list-header\")!\n  const _component_ion_avatar = _resolveComponent(\"ion-avatar\")!\n  const _component_ion_label = _resolveComponent(\"ion-label\")!\n  const _component_ion_item = _resolveComponent(\"ion-item\")!\n  const _component_ion_list = _resolveComponent(\"ion-list\")!\n  const _component_ion_content = _resolveComponent(\"ion-content\")!\n  const _component_ion_page = _resolveComponent(\"ion-page\")!\n\n  return (_openBlock(), _createBlock(_component_ion_page, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_ion_header, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_ion_toolbar, null, {\n            default: _withCtx(() => [\n              _createVNode(_component_ion_title, null, {\n                default: _withCtx(() => [\n                  _hoisted_1\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_ion_content, { fullscreen: true }, {\n        default: _withCtx(() => [\n          _createVNode(_component_ion_header, { collapse: \"condense\" }, {\n            default: _withCtx(() => [\n              _createVNode(_component_ion_toolbar, null, {\n                default: _withCtx(() => [\n                  _createVNode(_component_ion_title, { size: \"large\" }, {\n                    default: _withCtx(() => [\n                      _hoisted_2\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_ion_list, null, {\n            default: _withCtx(() => [\n              _createVNode(_component_ion_list_header, null, {\n                default: _withCtx(() => [\n                  _hoisted_3\n                ]),\n                _: 1\n              }),\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.conversaciones, (conversacion) => {\n                return (_openBlock(), _createBlock(_component_ion_item, {\n                  key: conversacion.id,\n                  onClick: ($event: any) => (_ctx.irAlaConversacion(conversacion.emailUsuario))\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_ion_avatar, { slot: \"start\" }, {\n                      default: _withCtx(() => [\n                        _createElementVNode(\"img\", {\n                          src: conversacion.fotoUser\n                        }, null, 8, _hoisted_4)\n                      ]),\n                      _: 2\n                    }, 1024),\n                    _createVNode(_component_ion_label, null, {\n                      default: _withCtx(() => [\n                        _createElementVNode(\"h2\", null, _toDisplayString(conversacion.nombreUser), 1),\n                        _createElementVNode(\"h3\", null, _toDisplayString(conversacion.infoUser), 1),\n                        _createElementVNode(\"p\", null, _toDisplayString(conversacion.ultimoMensaje), 1)\n                      ]),\n                      _: 2\n                    }, 1024)\n                  ]),\n                  _: 2\n                }, 1032, [\"onClick\"]))\n              }), 128))\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }))\n}","\nimport {\n  IonPage,\n  IonHeader,\n  IonToolbar,\n  IonTitle,\n  IonContent,\n  IonLabel,\n  IonList,\n  IonItem,\n  IonAvatar,\n  IonListHeader,\n  useIonRouter,\n} from \"@ionic/vue\";\nimport { auth, db } from \"@/main\";\nimport { defineComponent, reactive } from \"vue\";\nexport default defineComponent({\n  name: \"TabMensajes\",\n  components: {\n    IonHeader,\n    IonToolbar,\n    IonTitle,\n    IonContent,\n    IonPage,\n    IonLabel,\n    IonList,\n    IonItem,\n    IonAvatar,\n    IonListHeader,\n  },\n  data() {\n    return {\n      conversaciones: [],\n    };\n  },\n  setup() {\n    const state = reactive({\n      imagenUsuarioMensaje: \"\",\n      nombreUsuarioMensaje: \"\",\n      mensajeUsuario: \"\",\n    });\n    const ionRouter = useIonRouter();\n    const irAlaConversacion = async (emailUser: string) => {\n      ionRouter.push(\"/tabs/tabMensaje/\" + emailUser);\n    };\n    async function cargarPaginaMensajes() {\n      await db.collection(\"users\")\n        .doc(auth.currentUser?.uid)\n        .collection(\"mensajes\")\n        .get()\n        .then((querySnapshot) => {\n          querySnapshot.forEach(async (result) => {\n            console.log(result);\n            var fotoUserConversacion,\n              infoUserConversacion,\n              ultimoMensaje,\n              nombreUserConversacion,\n              conversacion;\n            const emailUserConversacion = result.id;\n            await db\n              .collection(\"users\")\n              .get()\n              .then((query) => {\n                query.forEach((user) => {\n                  if (user.data().email === emailUserConversacion) {\n                    fotoUserConversacion = user.data().fotoPerfil;\n                    infoUserConversacion = user.data().infoUsuario;\n                    nombreUserConversacion =\n                      user.data().nombre + user.data().apellidos;\n                  }\n                });\n              });\n            await db\n              .collection(\"users\")\n              .doc(auth.currentUser?.uid)\n              .collection(\"mensajes\")\n              .doc(emailUserConversacion)\n              .collection(\"conversacion\")\n              .get()\n              .then((querySnapshot2) => {\n                querySnapshot2.forEach((mensaje) => {\n                  ultimoMensaje = mensaje.data().mensaje;\n                });\n                conversacion = {\n                  nombreUser: nombreUserConversacion,\n                  fotoUser: fotoUserConversacion,\n                  infoUser: infoUserConversacion,\n                  ultimoMensaje: ultimoMensaje,\n                  emailUsuario: emailUserConversacion,\n                };\n                console.log(conversacion);\n                this.conversaciones.push(conversacion);\n              });\n          });\n        });\n    }\n    return {\n      cargarPaginaMensajes,\n      irAlaConversacion,\n    };\n  },\n  mounted() {\n    this.cargarPaginaMensajes();\n  },\n});\n","import { render } from \"./TabMensajes.vue?vue&type=template&id=4839b204&ts=true\"\nimport script from \"./TabMensajes.vue?vue&type=script&lang=ts\"\nexport * from \"./TabMensajes.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Users/diegosanchezmartin/Desktop/trekkingCastillaYLeon/trekkingCastillaYLeon/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_hoisted_1","_createTextVNode","_hoisted_2","_hoisted_3","_hoisted_4","render","_ctx","_cache","$props","$setup","$data","$options","_component_ion_title","_resolveComponent","_component_ion_toolbar","_component_ion_header","_component_ion_list_header","_component_ion_avatar","_component_ion_label","_component_ion_item","_component_ion_list","_component_ion_content","_component_ion_page","_openBlock","_createBlock","default","_withCtx","_createVNode","_","fullscreen","collapse","size","_createElementBlock","_Fragment","_renderList","conversaciones","conversacion","key","id","onClick","$event","irAlaConversacion","emailUsuario","slot","_createElementVNode","src","fotoUser","_toDisplayString","nombreUser","infoUser","ultimoMensaje","defineComponent","name","components","IonHeader","IonToolbar","IonTitle","IonContent","IonPage","IonLabel","IonList","IonItem","IonAvatar","IonListHeader","data","setup","reactive","imagenUsuarioMensaje","nombreUsuarioMensaje","mensajeUsuario","ionRouter","useIonRouter","async","push","emailUser","cargarPaginaMensajes","db","doc","auth","uid","collection","get","then","querySnapshot","forEach","fotoUserConversacion","infoUserConversacion","nombreUserConversacion","console","log","result","emailUserConversacion","query","user","email","fotoPerfil","infoUsuario","nombre","apellidos","querySnapshot2","mensaje","this","mounted","__exports__"],"sourceRoot":""}