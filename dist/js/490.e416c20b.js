"use strict";(self["webpackChunktrekkingcastillayleon"]=self["webpackChunktrekkingcastillayleon"]||[]).push([[490],{4490:function(e,n,a){a.r(n),a.d(n,{default:function(){return g}});var o=a(6252),l=a(3577);const s=(0,o.Uk)("Mensajes"),t=(0,o.Uk)("Mensajes"),i=(0,o.Uk)(" Conversaciones recientes "),r=["src"];function u(e,n,a,u,c,d){const f=(0,o.up)("ion-title"),m=(0,o.up)("ion-toolbar"),w=(0,o.up)("ion-header"),p=(0,o.up)("ion-list-header"),g=(0,o.up)("ion-avatar"),_=(0,o.up)("ion-label"),h=(0,o.up)("ion-item"),j=(0,o.up)("ion-list"),U=(0,o.up)("ion-content"),b=(0,o.up)("ion-page");return(0,o.wg)(),(0,o.j4)(b,null,{default:(0,o.w5)((()=>[(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[s])),_:1})])),_:1})])),_:1}),(0,o.Wm)(U,{fullscreen:!0},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{collapse:"condense"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(f,{size:"large"},{default:(0,o.w5)((()=>[t])),_:1})])),_:1})])),_:1}),(0,o.Wm)(j,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[i])),_:1}),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.conversaciones,(n=>((0,o.wg)(),(0,o.j4)(h,{key:n.id,onClick:a=>e.irAlaConversacion(n.emailUsuario)},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{slot:"start"},{default:(0,o.w5)((()=>[(0,o._)("img",{src:n.fotoUser},null,8,r)])),_:2},1024),(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o._)("h2",null,(0,l.zw)(n.nombreUser),1),(0,o._)("h3",null,(0,l.zw)(n.infoUser),1),(0,o._)("p",null,(0,l.zw)(n.ultimoMensaje),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1})}var c=a(7330),d=a(6216),f=a(2262),m=(0,o.aZ)({name:"TabMensajes",components:{IonHeader:c.Gu,IonToolbar:c.sr,IonTitle:c.wd,IonContent:c.W2,IonPage:c._i,IonLabel:c.Q$,IonList:c.q_,IonItem:c.Ie,IonAvatar:c.BJ,IonListHeader:c.yh},data(){return{conversaciones:[]}},setup(){(0,f.qj)({imagenUsuarioMensaje:"",nombreUsuarioMensaje:"",mensajeUsuario:""});const e=(0,c.cj)(),n=async n=>{e.push("/tabs/tabMensaje/"+n)};async function a(){await d.db.collection("users").doc(d.I.currentUser?.uid).collection("mensajes").get().then((e=>{e.forEach((async e=>{var n,a,o,l,s;console.log(e);const t=e.id;await d.db.collection("users").get().then((e=>{e.forEach((e=>{e.data().email===t&&(n=e.data().fotoPerfil,a=e.data().infoUsuario,l=e.data().nombre+e.data().apellidos)}))})),await d.db.collection("users").doc(d.I.currentUser?.uid).collection("mensajes").doc(t).collection("conversacion").get().then((e=>{e.forEach((e=>{o=e.data().mensaje})),s={nombreUser:l,fotoUser:n,infoUser:a,ultimoMensaje:o,emailUsuario:t},console.log(s),this.conversaciones.push(s)}))}))}))}return{cargarPaginaMensajes:a,irAlaConversacion:n}},mounted(){this.cargarPaginaMensajes()}}),w=a(3744);const p=(0,w.Z)(m,[["render",u]]);var g=p}}]);
//# sourceMappingURL=490.e416c20b.js.map